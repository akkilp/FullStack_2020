(this.webpackJsonpphonebookproject=this.webpackJsonpphonebookproject||[]).push([[0],{16:function(e,n,t){e.exports=t(39)},21:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),c=t(15),u=t.n(c),i=t(2),o=function(e){var n=e.text;return r.a.createElement("h1",null,n)},l=function(e){var n=e.name,t=e.number,a=e.children;return r.a.createElement("p",null,n," ",t," ",a)},s=function(e){var n=e.text,t=e.handleClick;return r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{onClick:t},n))},m=function(e){var n=e.handleChange,t=e.name,a=e.value;return r.a.createElement("div",null,t,r.a.createElement("input",{onChange:n,name:t,value:a}))},d=function(e){var n=e.search,t=e.setSearch;return r.a.createElement(r.a.Fragment,null,r.a.createElement(o,{text:"Find contact"}),r.a.createElement(m,{name:"name",handleChange:function(e){t(e.target.value)},value:n}))},f=t(5),h=t(3),E=function(e){var n=e.persons,t=e.handleUpdate,c=e.handleCreate,u=Object(a.useState)({name:"",number:""}),l=Object(i.a)(u,2),d=l[0],E=l[1],p=function(e){var n=e.target,t=n.value,a=n.name;E(Object(h.a)(Object(h.a)({},d),{},Object(f.a)({},a,t)))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(o,{text:"New contact"}),r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var a=n.find((function(e){return e.name.toUpperCase()===d.name.toUpperCase()})),r={name:d.name,number:d.number};a&&(r=Object(h.a)(Object(h.a)({},d),{},{id:a.id})),a?window.confirm("Contact already exists. Replace the existing data with current input?")&&t(r):c(r),E({name:"",number:""})}},r.a.createElement(m,{name:"name",handleChange:p,value:d.name}),r.a.createElement(m,{name:"number",handleChange:p,value:d.number}),r.a.createElement(s,{type:"submit",text:"add"})))},p=function(e){var n=e.persons,t=e.handleDelete,a=n.map((function(e,n){return r.a.createElement(l,{name:e.name,number:e.number,key:e.name},r.a.createElement(s,{text:"Delete",handleClick:function(){return t(e.id)}}))}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(o,{text:"Contacts"}),a)},g=function(e){var n=e.message,t="msg";return!0===n.isErr&&(t="error"),null===n.message?null:r.a.createElement("div",{className:t},n.message)},b=(t(21),t(4)),v=t.n(b),C="/api/persons",j=function(){return v.a.get(C).then((function(e){return e.data}))},O=function(e){return v.a.post(C,e).then((function(e){return e.data}))},x=function(e,n){return v.a.put("".concat(C,"/").concat(e),n).then((function(e){return e.data}))},k=function(e){return v.a.delete("".concat(C,"/").concat(e)).then((function(e){return e.data}))},w=function(){var e=Object(a.useState)([]),n=Object(i.a)(e,2),t=n[0],c=n[1],u=Object(a.useState)(""),o=Object(i.a)(u,2),l=o[0],s=o[1],m=Object(a.useState)({isErr:!1,message:null}),f=Object(i.a)(m,2),h=f[0],b=f[1];Object(a.useEffect)((function(){j().then((function(e){c(e)}))}),[]);var v=l.length>0?t.filter((function(e){return!e.name.toUpperCase().indexOf(l.toUpperCase())})):t;return r.a.createElement("div",null,r.a.createElement(d,{search:l,setSearch:s}),r.a.createElement(E,{persons:t,handleCreate:function(e){O(e).then((function(n){c(t.concat(n)),b({isErr:!1,message:"".concat(e.name," added to contact list.")}),setTimeout((function(){b({isErr:void 0,message:null})}),5e3)})).catch((function(e){b({isErr:!0,message:e.response.data.error}),setTimeout((function(){b({isErr:void 0,message:null})}),5e3)}))},handleUpdate:function(e){console.log(e);var n=t.find((function(n){return n.id===e.id}));x(n.id,e).then((function(n){c(t.map((function(t){return t.id!==e.id?t:n}))),b({isErr:!1,message:"".concat(e.name," data updated.")})})).catch((function(n){b({isErr:!0,message:"".concat(e.name," already deleted")}),c(t.filter((function(n){return n.id!==e.id}))),setTimeout((function(){b({isErr:void 0,message:null})}),5e3)}))}}),r.a.createElement(p,{persons:v,search:l,handleDelete:function(e){var n=t.find((function(n){return n.id===e}));window.confirm("Delete ".concat(n.name,"?"))&&k(n.id).then((function(){c(t.filter((function(n){return n.id!==e}))),b({isErr:!1,message:"".concat(n.name," deleted from contact list.")}),setTimeout((function(){b({isErr:void 0,message:null})}),5e3)})).catch((function(n){b({isErr:!0,message:"Contact is already deleted"}),c(t.filter((function(n){return n.id!==e})))}))}}),r.a.createElement(g,{message:h,setMessage:b}))};u.a.render(r.a.createElement(w,null),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.75a0cde5.chunk.js.map